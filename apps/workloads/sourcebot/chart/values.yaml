sourcebot:
  sourcebot:
    replicaCount: 1
    image:
      pullPolicy: IfNotPresent
    ingress:
      enabled: true
      className: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
      hosts:
        - host: sourcebot.oremuslabs.app
          paths:
            - path: /
              pathType: Prefix
      tls:
        - hosts:
            - sourcebot.oremuslabs.app
          secretName: oremuslabs-app-wildcard-tls
    persistence:
      enabled: true
      size: 50Gi
      storageClass: longhorn
      accessModes:
        - ReadWriteOnce
    service:
      type: ClusterIP
      port: 3000
    resources:
      requests:
        cpu: 500m
        memory: 1Gi
      limits:
        cpu: 2000m
        memory: 4Gi
    additionalEnvSecrets:
      - envName: GITHUB_TOKEN
        secretName: sourcebot-github-token
        secretKey: credential
    config:
      $schema: https://raw.githubusercontent.com/sourcebot-dev/sourcebot/main/schemas/v3/index.json
      connections:
        oremus-labs-github:
          type: github
          token:
            env: GITHUB_TOKEN
          orgs:
            - Oremus-Labs
      models:
        - provider: openai-compatible
          displayName: Local VLLM
          model: ai/qwen3:14B-Q6_K
          baseUrl: http://10.10.10.8:8080/v1
      settings: {}
    additionalEnv: []

  postgresql:
    deploy: true
    auth:
      username: sourcebot
      database: sourcebot
      existingSecret: sourcebot-secrets
      secretKeys:
        userPasswordKey: postgresql-password
        adminPasswordKey: postgresql-password
    primary:
      persistence:
        enabled: true
        size: 20Gi
        storageClass: longhorn

  redis:
    deploy: true
    auth:
      username: default
      existingSecret: sourcebot-secrets
      existingSecretPasswordKey: redis-password

githubTokenSecret:
  create: true
  name: sourcebot-github-token
  onepassword:
    itemPath: "vaults/fekk46izlezqrgocthhcn4xwp4/items/t2jgbevjw6a645f4amgw73ay5u"

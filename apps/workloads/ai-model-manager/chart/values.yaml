namespace: ai

deploymentRevision: "v0.5.24-20251126-01"

image:
  repository: ghcr.io/oremus-labs/ol-model-manager
  tag: "0.5.31-go"
  pullPolicy: Always

api:
  replicaCount: 1
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}

worker:
  replicaCount: 1
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  hfHubDownloadTimeoutSeconds: 18000

sync:
  replicaCount: 1
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}

gitSync:
  repo: https://github.com/Oremus-Labs/ol-model-catalog.git
  branch: main
  waitSeconds: 30
  image: registry.k8s.io/git-sync/git-sync
  imageTag: v4.2.3

catalog:
  rootPath: /workspace/catalog
  modelsSubdir: models

runtime:
  image:
    repository: ghcr.io/oremus-labs/vllm-rocm-gptoss
    tag: 0.11.2-gptoss-tokenfix5
    pullPolicy: IfNotPresent

active:
  namespace: ai
  inferenceServiceName: active-llm

weights:
  pvcName: venus-model-storage
  mountPath: /mnt/models
  inferenceModelRoot: /mnt/models
  cliCachePath: /mnt/models/.hf-cache

huggingface:
  secretName: hf-token
  secretKey: HUGGING_FACE_HUB_TOKEN

state:
  enabled: true
  pvcName: model-manager-state
  size: 5Gi
  storageClass: venus-local-storage
  hostPath: /mnt/ai-model-cache/model-manager-state
  hostNode: venus
  mountPath: /app/state

datastore:
  driver: postgres
  dsn: "postgresql://modelmanager:modelmanager-secret@model-manager-postgres-postgresql.ai.svc.cluster.local:5432/modelmanager?sslmode=disable"

redis:
  enabled: true
  serviceName: model-manager-redis
  image: redis:7.4-alpine
  imagePullPolicy: IfNotPresent
  addr: ""
  username: ""
  db: 0
  tlsEnabled: false
  tlsInsecure: false
  passwordSecret:
    name: ""
    key: password
  jobStream: "model-manager:jobs"
  jobGroup: "weights-workers"
  persistence:
    enabled: true
    pvcName: model-manager-redis
    size: 10Gi
    storageClass: longhorn
    hostPath: ""
    hostNode: ""
  resources: {}

events:
  channel: model-manager-events

notifications:
  webhookURL: "https://httpbin.org/post"

apiToken:
  enabled: true
  secretName: model-manager-api-token
  secretKey: token
  createSecret: false
  value: ""
  onepasswordVaultID: ""
  onepasswordItemID: ""
  onepasswordField: token

recommendations:
  gpuProfilePath: "/app/config/gpu-profiles.json"

onepassword:
  # 1Password item for model-catalog git credentials
  # Contains: username and token fields for GitHub access
  itemPath: "vaults/fekk46izlezqrgocthhcn4xwp4/items/t4vuvleriwxfhppuq6zn7zb2eu"
  secretName: model-catalog-git

route:
  hosts:
    - model-manager.knative.oremuslabs.app
    - model-manager-api.oremuslabs.app
  ingressClass: traefik
  tlsSecret: ""

apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: qwen3-0-6b
  namespace: {{ .Values.namespace }}
  annotations:
    argocd.argoproj.io/sync-wave: "3"
    argocd.argoproj.io/tracking-id: workloads-qwen-vllm:/HTTPRoute:{{ .Values.namespace }}/qwen3-0-6b
  labels:
    app.kubernetes.io/part-of: qwen-vllm
spec:
  hostnames:
  {{- range .Values.gatewayApi.hosts }}
  - {{ . | quote }}
  {{- end }}
  parentRefs:
  {{- range .Values.gatewayApi.parentRefs }}
  - name: {{ .name }}
    group: {{ default "gateway.networking.k8s.io" .group }}
    kind: {{ default "Gateway" .kind }}
    {{- if .namespace }}
    namespace: {{ .namespace }}
    {{- end }}
    {{- if .sectionName }}
    sectionName: {{ .sectionName }}
    {{- end }}
  {{- end }}
  rules:
  - matches:
    - path:
        type: {{ .Values.gatewayApi.pathMatchType }}
        value: {{ .Values.gatewayApi.pathMatchValue }}
    backendRefs:
    - name: qwen3-0-6b-predictor
      group: ""
      kind: Service
      port: 80
      weight: 1

oauth2-proxy:
  replicaCount: 1
  image:
    repository: quay.io/oauth2-proxy/oauth2-proxy
    tag: v7.6.0
  service:
    type: ClusterIP
    portNumber: 4180
  ingress:
    enabled: false
  config:
    provider: oidc
    oidcIssuerUrl: https://login.microsoftonline.com/abfcbee8-658f-4ab3-97f5-9b357e0f8cda/v2.0
    redirectUrl: https://auth.oremuslabs.app/oauth2/callback
    emailDomains:
      - "*"
    upstreams:
      - file:///dev/null
    cookie:
      secure: true
      samesite: lax
  metrics:
    enabled: false
  extraEnv:
    - name: OAUTH2_PROXY_CLIENT_ID
      valueFrom:
        secretKeyRef:
          name: oauth2-proxy-secret
          key: oidc.azure.clientId
    - name: OAUTH2_PROXY_CLIENT_SECRET
      valueFrom:
        secretKeyRef:
          name: oauth2-proxy-secret
          key: oidc.azure.clientSecret
    - name: OAUTH2_PROXY_COOKIE_SECRET
      valueFrom:
        secretKeyRef:
          name: oauth2-proxy-secret
          key: server.secretkey
  extraArgs:
    provider: "oidc"
    oidc-issuer-url: "https://login.microsoftonline.com/abfcbee8-658f-4ab3-97f5-9b357e0f8cda/v2.0"
    redirect-url: "https://auth.oremuslabs.app/oauth2/callback"
    email-domain: "*"
    upstream: "file:///dev/null"
    cookie-samesite: "lax"
    set-xauthrequest: "true"
    pass-authorization-header: "true"
    skip-jwt-bearer-tokens: "true"
    scope: "openid profile email offline_access"
    oidc-groups-claim: "groups"
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

traefik:
  host: auth.oremuslabs.app
  tlsSecret: oremuslabs-app-wildcard-tls

onepassword:
  itemPath: "vaults/fekk46izlezqrgocthhcn4xwp4/items/6nwqovm6ajtq6xbqpsij4kigw4"

replicaCount: 1

image:
  repository: quay.io/oauth2-proxy/oauth2-proxy
  tag: v7.6.0

service:
  type: ClusterIP
  portNumber: 4180

ingress:
  enabled: false

config:
  # Use env vars from the secret for client ID/secret/cookie secret.
  provider: oidc
  oidcIssuerUrl: https://login.microsoftonline.com/abfcbee8-658f-4ab3-97f5-9b357e0f8cda/v2.0
  redirectUrl: https://auth.oremuslabs.app/oauth2/callback
  emailDomains:
    - "*"
  upstreams:
    - file:///dev/null
  cookie:
    secure: true
    samesite: lax

metrics:
  enabled: false

extraEnvFrom:
  - secretRef:
      name: oauth2-proxy-secret

extraArgs:
  set-authority: "true"
  set-xauthrequest: "true"
  pass-authorization-header: "true"
  skip-jwt-bearer-tokens: "true"
  scope: "openid profile email offline_access"
  oidc-groups-claim: "groups"

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Traefik ingressroute + middleware for forwardAuth
traefik:
  host: auth.oremuslabs.app
  tlsSecret: oremuslabs-app-wildcard-tls

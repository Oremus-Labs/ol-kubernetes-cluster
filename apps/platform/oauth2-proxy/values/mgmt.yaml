replicaCount: 1

ingress:
  enabled: false

service:
  type: ClusterIP
  portNumber: 4180

metrics:
  enabled: false

secret:
  enabled: false

config:
  existingSecret: oauth2-proxy
  # Full oauth2-proxy.cfg rendered into the ConfigMap
  configFile: |-
    provider = "oidc"
    oidc_issuer_url = "https://login.microsoftonline.com/abfcbee8-658f-4ab3-97f5-9b357e0f8cda/v2.0"
    redirect_url = "https://auth.oremuslabs.app/oauth2/callback"
    email_domains = [ "*" ]
    upstreams = [ "static://200" ]
    reverse_proxy = true
    set_authorization_header = true
    set_xauthrequest = true
    silence_ping_logging = true
    skip_jwt_bearer_tokens = true
    skip_provider_button = true
    cookie_refresh = "1h"
    cookie_secure = true
    cookie_samesite = "lax"
    whitelist_domains = [ ".oremuslabs.app:*" ]
    cookie_domains = [ ".oremuslabs.app" ]

extraArgs:
  scope: "openid profile email offline_access"
  oidc-groups-claim: "groups"
  oidc-email-claim: "preferred_username"
  insecure-oidc-allow-unverified-email: "true"

traefik:
  host: auth.oremuslabs.app
  tlsSecret: oremuslabs-app-wildcard-tls

onepassword:
  itemPath: "vaults/fekk46izlezqrgocthhcn4xwp4/items/6nwqovm6ajtq6xbqpsij4kigw4"
